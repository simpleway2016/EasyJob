<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="scripts/JScriptInvoker.js" type="text/javascript"></script>
    <script src="scripts/JControls.js" type="text/javascript"></script>
    <style>
        .btn{
            border:3px solid black;
        }
    </style>    
</head>
<body>
    

    <JButton id="btn1" datacontext="{name:'hello'}" text="my button" class="btn">
        <script match="$text=='t1'" type="text/html">
            <div>
                <input type="button" style="color:blue;" databind="value =$text;className=$class;" />
                <div>
                    <div databind="innerHTML=$text"></div>
                    <div>text:{$text}</div>
                </div>
            </div>
        </script>

        <script match="@name=='hello'" type="text/html">
            <div>
                <input type="text" style="color:red;" databind="value =$text;" />
                <div>
                    <div databind="innerHTML=$text"></div>
                    <div expression="{0}.innerHTML={1}.@name"></div>
                    <div>name:{@name}</div>
                </div>
            </div>
        </script>
    </JButton>

    <JButton id="btn2" datacontext="{name:'add element'}" class="btn" template="btntemplate" onclick="addelement()" text="{bind @name}">
        <script type="text/html">
            <div>
                <input type="button" class="jbutton" value="{bind $text}" databind="className=$class" />
                <JTextbox expression="{0}.text={1}.$text+' aa';"/>
            </div>
            
        </script>
    </JButton>

    <input type="button" value="change text" onclick="btn1.text = 't1';"/>
    <input type="button" value="change name" onclick="btn1.datacontext.name = 'new name';" />

    <JCheckboxList id="list1" valuemember="item.value" textmember="item.name" itemsource="[{item:{name:'aa',value:1}},{item:{name:'bb',value:2}}]">
    </JCheckboxList>

    <JRadioList id="list2" valuemember="item.value" textmember="item.name" itemsource="[{item:{name:'aa',value:1}},{item:{name:'bb',value:2}}]">
    </JRadioList>

    <JDropdownList id="list3" valuemember="item.value" textmember="item.name" itemsource="[{item:{name:'aa',value:1}},{item:{name:'bb',value:2}}]">
    </JDropdownList>
    <script lang="ja">
        function addelement()
        {
            var div = document.createElement("JBUTTON");
            div.setAttribute("text", "new button");
            document.body.appendChild(div);
        }
        window.onload = function ()
        {
            //var ob = window.list1.itemsource.source[0];
            //ob.addPropertyChangedListener(function (s, name, value) {
            //    alert(name + " changed oldvalue:" + value + " nowvalue:" + s[name]);
            //});
            //window.list1.itemsource.source[1].addPropertyChangedListener(function (s, name, value) {
            //    alert(name + " changed oldvalue:" + value + " nowvalue:" + s[name]);
            //});
            //ob.item.child.name = "test aaa";
            //window.list1.itemsource.source[1].item.child.name = "bb2";

        }
    </script>
</body>
</html>