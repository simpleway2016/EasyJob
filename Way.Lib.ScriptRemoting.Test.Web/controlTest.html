<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="scripts/JScriptInvoker.js" type="text/javascript"></script>
    <script src="scripts/JControls.js" type="text/javascript"></script>
    <style>
        .btn{
            border:3px solid black;
        }
    </style>    
</head>
<body>
    

    <JButton id="btn1" datacontext="{name:'hello'}" text="my button" class="btn">
        <script match="$text=='t1'" type="text/html">
            <div>
                <input type="button" style="color:blue;" databind="value =$text;className=$class;" />
                <div>
                    <div databind="innerHTML=$text"></div>
                    <div>text:{$text}</div>
                </div>
            </div>
        </script>

        <script match="@name=='hello'" type="text/html">
            <div>
                <input type="text" style="color:red;" databind="value =$text;" />
                <div>
                    <div databind="innerHTML=$text"></div>
                    <div expression="{0}.innerHTML={1}.@name"></div>
                    <div>name:{@name}</div>
                </div>
            </div>
        </script>
    </JButton>

    <JButton id="btn2" datacontext="{name:'hello22'}" template="btntemplate" onclick="alert(2)" databind="text=@name">
    </JButton>

    <input type="button" value="change text" onclick="btn1.text = 't1';"/>
    <input type="button" value="change name" onclick="btn1.datacontext.name = 'new name';" />

    <JCheckboxList id="list1" height="120" textmember="item.name" itemsource="[{item:{name:'aa',value:1}},{item:{name:'bb',value:2}}]">
    </JCheckboxList>

    <script lang="ja">
        window.onload = function ()
        {
            var ob = window.list1.itemsource.source[0];
            ob.addPropertyChangedListener(function (s, name, value) {
                alert(name + " changed oldvalue:" + value + " nowvalue:" + s[name]);
            });
            window.list1.itemsource.source[1].addPropertyChangedListener(function (s, name, value) {
                alert(name + " changed oldvalue:" + value + " nowvalue:" + s[name]);
            });
            //ob.item.child.name = "test aaa";
            //window.list1.itemsource.source[1].item.child.name = "bb2";
        }
    </script>
</body>
</html>