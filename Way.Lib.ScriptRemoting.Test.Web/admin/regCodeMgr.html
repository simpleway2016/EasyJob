<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="/scripts/jcontrol/BigInt.js" type="text/javascript"></script>
    <script src="/scripts/jcontrol/RSA.js" type="text/javascript"></script>
    <script src="/scripts/jcontrol/Barrett.js" type="text/javascript"></script>
    <script src="/scripts/jcontrol/WayScriptRemoting.js" type="text/javascript"></script>

    <script src="/scripts/jcontrol/JInit.js" type="text/javascript"></script>
    <script src="/scripts/jcontrol/JDataSource.js" type="text/javascript"></script>
    <script src="/scripts/jcontrol/JExtension.js" type="text/javascript"></script>
    <script src="/scripts/jcontrol/JBinder.js" type="text/javascript"></script>
    <script src="/scripts/jcontrol/JObserveObject.js" type="text/javascript"></script>
    <script src="/scripts/jcontrol/JHttpHelper.js" type="text/javascript"></script>
    <script src="/scripts/jcontrol/JControls.js" type="text/javascript"></script>
    <style>
        .clist {
            overflow-y: auto;
            height: 500px;
            width: 90%;
        }
    </style>  
</head>
<body controller="PandaAudioServer.AdminController">
    <div>
        创建<JTextBox id="txtMakeCount"></JTextBox>个 <JButton text="马上创建" onclick="btnMakeClick()"></JButton>
    </div>
    <JList id="list" buffersize="15" loadonscroll="true" class="clist" itemsource="RegCodes">
        <script type="text/html">
            <div id="itemContainer" style="display:table;">
                <div style="display:table-row;">
                    <div style="display:table-cell;width:350px;">注册码</div>
                    <div style="display:table-cell;width:130px;">生成人</div>
                    <div style="display:table-cell;width:250px;">生成时间</div>
                    <div style="display:table-cell;width:130px;">使用者</div>
                    <div style="display:table-cell;">状态</div>
                </div>
            </div>
        </script>

        <script for="item" type="text/html">
            <div style="display:table-row;">
                <div style="display:table-cell;">{@RegGuid}</div>
                <div style="display:table-cell;">{@MakerName}</div>
                <div style="display:table-cell;">{@MakeTime}</div>
                <div style="display:table-cell;">{@UserDesc}</div>
                <div style="display:table-cell;" expression="{0}.innerHTML={1}.@Used?'已使用':'&nbsp;'" expression1="{0}.parentElement.style.color={1}.@Used?'blue':'black'">{@Used}</div>
            </div>
        </script>
    </JList>

    <script lang="ja">
        function btnMakeClick()
        {
            window.controller.server.MakeRegCode(txtMakeCount.text, function (ret, err) {
                if (err) alert(err);
                else {
                    alert("成功创建！");
                    list.rebind();
                }
            });
        }
        window.onload = function () {
        }
    </script>
</body>
</html>