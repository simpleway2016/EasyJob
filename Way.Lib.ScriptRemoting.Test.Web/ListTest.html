<Master src="master2.html"></Master>
<Set name="Controller">
     Way.Lib.ScriptRemoting.Test.TestPage
</Set>
<Set name="ControlTemplate">
    /templates/main.html
</Set>
<Set name="Content">
    <WayDropDownList id="chkList2" selectonly="true" datasource="[{text:'a',id:0},{text:'b',id:1}]" style="width:200px;background-color:#dddcdc;">
    </WayDropDownList>
     
    <input id="aa" />
    <div id="titleDiv"></div>
    <WayButton text="rsa test" onclick="this.text = 'hjewef'; rsatest();"></WayButton>
    <input type="text" id="txt555" databind="value=@mytext">
    <WayCheckboxList id="chkList1" databind="value=@dbids" valueMember="id" textMember="Name" datasource="Way.Lib.ScriptRemoting.WinTest.MyDB.Databases" style="width:200px;background-color:#dddcdc;">
    </WayCheckboxList>
    

    <WayRadioList id="rdList1" databind="value=@dbids" valueMember="id" textMember="Name" datasource="Way.Lib.ScriptRemoting.WinTest.MyDB.Databases" style="width:200px;background-color:#dddcdc;margin-top:10px;">
    </WayRadioList>
    <WayDropDownList id="list1" databind="value=@myvalue,text=@mytext" valueMember="id" textMember="caption" datasource="Way.Lib.ScriptRemoting.WinTest.MyDB.DBColumn" style="margin-top:100px;">
    </WayDropDownList>
    <WayRelateList id="relList">
        <config datasource="Way.Lib.ScriptRemoting.WinTest.MyDB.Project" textMember="Name" valueMember="id"></config>
        <config datasource="Way.Lib.ScriptRemoting.WinTest.MyDB.Databases" relateMember="ProjectID" textMember="Name" valueMember="id"></config>
        <config datasource="Way.Lib.ScriptRemoting.WinTest.MyDB.DBTable" relateMember="DatabaseID" textMember="Name" valueMember="id"></config>
    </WayRelateList>
    <button onclick="relList.value=[1,2,8]">relList test</button> 
    <div id="d1" style="height:30px;overflow-y:auto;">
        wfea<span>22</span>pp
    </div>
    <script lang="ja">
            //var list = new WayDropDownList("list1", "Way.Lib.ScriptRemoting.Test.TestPage" , "grid");

            var d1 = document.getElementById("d1");
            var value = "";
            for (var p in d1.childNodes[0])
                value += p + ":" + d1.childNodes[0][p] + "\r\n";
            /*d1.setAttribute("style","width:20px;height:20px;background-color:red;")
             
            sefre = {
            */
            window.onload = function () {

                var test = WayDataBindHelper.dataBind(list1, { myvalue: 16 });

                var test2 = WayDataBindHelper.dataBind(document.getElementById("txt555"), test);

                var chkObj = WayDataBindHelper.dataBind(chkList1, { dbids: [10] });

                chkObj.addEventListener("change", function (model,name, value) {
                    titleDiv.innerHTML = "chkObj.onchange:" + (chkObj.dbids);
                });

                var chkObj2 = WayDataBindHelper.dataBind(rdList1, { dbids: 10 });

                chkObj2.addEventListener("change", function (model, name, value) {
                    titleDiv.innerHTML = "chkObj2.onchange:" + (chkObj2.dbids);
                });

            }

            function rsatest() {
                var c = "看到这个，证明成功了。";
                for (var i = 0 ; i < 8 ; i++)
                    c += "看到这个，证明成功了。";
                window.controller.TestRSA(c, {name:"way",age:18}, function (ret, err) {
                    if (err)
                        alert(err);
                    else
                        alert(ret);
                });
            }
    </script>
</Set>